{% extends 'base.html.twig' %}

{% block title %}Inscription{% endblock %}

{% block content %}

    {{ include('front/flashes.html.twig') }}

    <div class="wrapper">
        <h1>Inscription</h1>
        <div id="form-register">
            <form method="post" action="index.php?action=register">
                <div class="form-group">
                    <label for="pseudo">Pseudo</label><br>
                    <input class="form-control" type="text" id="pseudo" name="pseudo" value="{% if userForm %}{{ userForm.get('pseudo') }}{% endif %}">
                    {% if errors.pseudo %}
                        <div class="alert alert-warning">{{ errors.pseudo }}</div>
                    {% endif %}
                </div>
                <div class="form-group">
                    <label for="pseudo">Email</label><br>
                    <input class="form-control" type="text" id="email" name="email" value="{% if userForm %}{{ userForm.get('email') }}{% endif %}">
                    {% if errors.email %}
                    <div class="alert alert-warning">{{ errors.email }}</div>
                    {% endif %}
                </div>
                <div class="form-group">
                    <label for="password">Mot de passe</label><br>
                    <input class="form-control" type="password" id="password" name="password">
                    {% if errors.password %}
                    <div class="alert alert-warning">{{ errors.password }}</div>
                    {% endif %}
                </div>
                <!-- Recaptcha field -->
                <input type="hidden" id="recaptchaResponse" name="recaptcha-response">
                <input class="btn btn-secondary" type="submit" value="Inscription" id="submit" name="submit">
            </form>
        </div>
    </div>
    <!-- Recaptcha call -->
    <script src="https://www.google.com/recaptcha/api.js?render=XXXXXXXXXXXXXXXXX"></script>
    <script>
        grecaptcha.ready(function() {
            grecaptcha.execute('XXXXXXXXXXXXXXXXX', {action: 'submit'}).then(function(token) {
                // Add your logic to submit to your backend server here.
                document.getElementById('recaptchaResponse').value = token
            });
        });
    </script>

{% endblock %}
